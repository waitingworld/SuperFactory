(function(t){function e(e){for(var o,i,s=e[0],c=e[1],d=e[2],l=0,p=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),r=function(){var t=this,e=t._self._c;return e("main-board")},a=[],i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"topClass"},[e("el-row",{staticStyle:{width:"100%"},attrs:{gutter:30}},[e("el-col",{attrs:{span:5}},[e("inventory",{on:{setMaterials:t.getMaterials}})],1),e("el-col",{attrs:{span:18}},[e("show-board",{attrs:{"all-data":t.allMaterials,"tree-data":t.treeMaterials}})],1)],1)],1)},s=[];n("14d9");const c=["铁矿厂","铜矿厂","棉花厂","木材厂","油井","硅矿厂","铀矿厂","冶炼车间","化工车间","初级成品车间","高级成品车间"],d={};async function u(t){const e=await fetch("/icon/"+t+".png"),n=await e.blob(),o=new FileReader;o.readAsDataURL(n),o.onload=()=>{d[t]=o.result}}const l={"铁矿":{production:"铁矿厂"},"铜矿":{production:"铜矿厂"},"棉花":{production:"棉花厂"},"木材":{production:"木材厂"},"原油":{production:"油井"},"硅矿":{production:"硅矿厂"},"铀矿":{production:"铀矿厂"},"铁片":{production:"冶炼车间",need:{"铁矿":2}},"钛块":{production:"冶炼车间",need:{"铁矿":3}},"铜线":{production:"冶炼车间",need:{"铜矿":2}},"水泥":{production:"冶炼车间",need:{"硅矿":5}},"玻璃":{production:"冶炼车间",need:{"硅矿":2}},"碎石":{production:"冶炼车间",need:{},from:{"钛块":1}},"塑料片":{production:"化工车间",need:{"原油":2}},"硫":{production:"化工车间",need:{"原油":2}},"木炭":{production:"化工车间",need:{"木材":2}},"轻质油":{production:"化工车间",need:{"原油":3}},"石墨":{production:"化工车间",need:{"木材":5}},"沥青":{production:"化工车间",need:{},from:{"轻质油":1}},"木板":{production:"初级成品车间",need:{"木材":2}},"纸":{production:"初级成品车间",need:{"木材":2}},"纺织":{production:"初级成品车间",need:{"棉花":2}},"钛合金":{production:"初级成品车间",need:{"钛块":3,"铁片":1}},"铁钉":{production:"初级成品车间",need:{"铁片":1}},"口罩":{production:"初级成品车间",need:{"原油":2,"纺织":1}},"磁铁":{production:"初级成品车间",need:{"铁片":5}},"气球":{production:"初级成品车间",need:{"塑料片":5}},"硫酸":{production:"初级成品车间",need:{"铜线":4,"硫":2}},"绝缘线":{production:"初级成品车间",need:{"塑料片":2,"铜线":5}},"螺丝":{production:"初级成品车间",need:{"铁片":2}},"玩具车":{production:"初级成品车间",need:{"塑料片":5}},"平底锅":{production:"初级成品车间",need:{"木板":5,"铁片":10}},"灯泡":{production:"初级成品车间",need:{"铜线":1,"石墨":3}},"钢板":{production:"初级成品车间",need:{"铁片":5}},"电池":{production:"初级成品车间",need:{"铁片":1,"硫酸":2,"铜线":3}},"军用电筒":{production:"初级成品车间",need:{"灯泡":1,"电池":2}},"头盔":{production:"初级成品车间",need:{"铁片":50}},"望远镜":{production:"初级成品车间",need:{"玻璃":5,"铁片":10}},"军用背包":{production:"初级成品车间",need:{"纺织":20}},"军用水壶":{production:"初级成品车间",need:{"铁片":10}},"红科研瓶":{production:"初级成品车间",need:{"铁片":1,"铜线":1}},"电路板":{production:"高级成品车间",need:{"铜线":5,"绝缘线":2,"塑料片":5}},"收音机":{production:"高级成品车间",need:{"电池":1,"绝缘线":5,"塑料片":5}},"防毒面具":{production:"高级成品车间",need:{"口罩":1,"木炭":50}},"内燃机":{production:"高级成品车间",need:{"钢板":8,"螺丝":5}},"电动机":{production:"高级成品车间",need:{"磁铁":8,"钢板":8,"铜线":5}},"电风扇":{production:"高级成品车间",need:{"电动机":1,"绝缘线":10,"铁片":10}},"散热器":{production:"高级成品车间",need:{"电动机":1,"铁片":50}},"高效电池":{production:"高级成品车间",need:{"电池":1,"电路板":2,"绝缘线":10}},"抽水机":{production:"高级成品车间",need:{"电动机":1,"绝缘线":8,"钢板":8}},"电钻":{production:"高级成品车间",need:{"电动机":1,"绝缘线":10,"钢板":10}},"防弹衣":{production:"高级成品车间",need:{"钢板":1,"纺织":30}},"洗衣机":{production:"高级成品车间",need:{"电动机":1,"电路板":5,"铁片":50,"绝缘线":3}},"冰箱":{production:"高级成品车间",need:{"电动机":1,"电路板":8,"铁片":50,"绝缘线":3}},"摩托车":{production:"高级成品车间",need:{"钢板":20,"内燃机":5,"电池":2,"电路板":2}},"电视机":{production:"高级成品车间",need:{"绝缘线":3,"玻璃":50,"塑料片":50,"电路板":10}},"手机":{production:"高级成品车间",need:{"高效电池":1,"玻璃":5,"绝缘线":3,"电路板":10}},"太阳能板":{production:"高级成品车间",need:{"高效电池":5,"石墨":50,"电路板":2}},"电脑":{production:"高级成品车间",need:{"处理器":1,"散热器":1,"塑料片":50,"绝缘线":3}},"拖拉机":{production:"高级成品车间",need:{"内燃机":1,"钢板":80,"玻璃":30}},"挖掘机":{production:"高级成品车间",need:{"内燃机":2,"钢板":80,"电路板":2}},"处理器":{production:"高级成品车间",need:{"电路板":8,"高效电池":1,"散热器":3}},"汽车":{production:"高级成品车间",need:{"钢板":80,"玻璃":5,"内燃机":4,"电池":5}},"信号接收器":{production:"高级成品车间",need:{"处理器":2,"高效电池":8,"塑料片":100}},"炸弹":{production:"高级成品车间",need:{"硫":50,"铁片":100,"木炭":50}},"坦克":{production:"高级成品车间",need:{"内燃机":8,"钢板":100,"电路板":5,"电池":5,"灯泡":4}},"火箭助推器":{production:"高级成品车间",need:{"内燃机":10,"石墨":100,"处理器":3}},"火箭燃料":{production:"高级成品车间",need:{"高效电池":10,"轻质油":10,"太阳能板":3}},"遥控感应器":{production:"高级成品车间",need:{"处理器":8,"电路板":20,"高效电池":5}},"导弹车":{production:"高级成品车间",need:{"火箭助推器":1,"火箭燃料":1,"遥控感应器":1}},"离心机":{production:"高级成品车间",need:{"水泥":200,"电动机":50,"钢板":200}},"超级计算机":{production:"高级成品车间",need:{"处理器":25,"散热器":100,"绝缘线":300}},"雷达":{production:"高级成品车间",need:{"处理器":8,"遥控感应器":2,"超级计算机":1}},"原子弹":{production:"高级成品车间",need:{"炸弹":50,"铀棒":100,"钢板":200,"离心机":3}},"DF导弹系统":{production:"高级成品车间",need:{"原子弹":1,"导弹车":1,"BD导航卫星":1}},"BD导航卫星":{production:"高级成品车间",need:{"信号接收器":1,"超级计算机":1,"雷达":1}},"涡扇发动机":{production:"高级成品车间",need:{"内燃机":1,"钛合金":5,"电路板":3}},"重力推进器":{production:"高级成品车间",need:{"轻质油":5,"电动机":4,"遥控感应器":1}},"绿科研瓶":{production:"高级成品车间",need:{"磁铁":1,"硫":1,"木炭":1}},"蓝科研瓶":{production:"高级成品车间",need:{"绝缘线":3,"电池":1,"钢板":3}},"黑科研瓶":{production:"高级成品车间",need:{"纺织":3,"炸弹":3,"信号接收器":1,"水泥":5}},"紫科研瓶":{production:"高级成品车间",need:{"电路板":3,"内燃机":3,"石墨":10}},"黄科研瓶":{production:"高级成品车间",need:{"电动机":3,"高效电池":1,"处理器":1}},"H-30轰炸机":{production:"高级成品车间",need:{"涡扇发动机":4,"重力推进器":2,"BD导航卫星":1,"雷达":3}},"铀棒":{production:"铀浓缩车间",need:{"铀矿":200}},"铀矿废料":{production:"铀浓缩车间",need:{},from:{"铀棒":1}}};var p=function(){var t=this,e=t._self._c;return e("el-card",{staticClass:"InventoryTopClass",attrs:{shadow:"always"}},[e("div",{staticClass:"tagBoxDivClass",staticStyle:{"overflow-y":"auto",height:"90vh"}},[e("div",{staticClass:"tagBoxClass"},t._l(Object.getOwnPropertyNames(t.rawMaterial),(function(n,o){return e("el-tag",{key:o,staticClass:"tagClass",attrs:{size:"mini",type:t.objectData[n].from?"warning":""},on:{click:function(e){return t.setMaterials(n)}}},[t._v(" "+t._s(n)+" ")])})),1),e("div",{staticClass:"tagBoxClass"},t._l(Object.getOwnPropertyNames(t.smelt),(function(n,o){return e("el-tag",{key:o,staticClass:"tagClass",attrs:{size:"mini",type:t.objectData[n].from?"warning":""},on:{click:function(e){return t.setMaterials(n)}}},[t._v(" "+t._s(n)+" ")])})),1),e("div",{staticClass:"tagBoxClass"},t._l(Object.getOwnPropertyNames(t.chemicalIndustry),(function(n,o){return e("el-tag",{key:o,staticClass:"tagClass",attrs:{size:"mini",type:t.objectData[n].from?"warning":""},on:{click:function(e){return t.setMaterials(n)}}},[t._v(" "+t._s(n)+" ")])})),1),e("div",{staticClass:"tagBoxClass"},t._l(Object.getOwnPropertyNames(t.primaryFinishedProduct),(function(n,o){return e("el-tag",{key:o,staticClass:"tagClass",attrs:{size:"mini",type:t.objectData[n].from?"warning":""},on:{click:function(e){return t.setMaterials(n)}}},[t._v(" "+t._s(n)+" ")])})),1),e("div",{staticClass:"tagBoxClass"},t._l(Object.getOwnPropertyNames(t.advancedFinishedProduct),(function(n,o){return e("el-tag",{key:o,staticClass:"tagClass",attrs:{size:"mini",type:t.objectData[n].from?"warning":""},on:{click:function(e){return t.setMaterials(n)}}},[t._v(" "+t._s(n)+" ")])})),1)])])},h=[],f={name:"Inventory",computed:{objectData(){return l},rawMaterial(){let t={};return Object.getOwnPropertyNames(this.objectData).forEach(e=>{["铁矿厂","铜矿厂","棉花厂","油井","木材厂","硅矿厂","铀矿厂"].includes(this.objectData[e].production)&&(t[e]=this.objectData[e])}),t},smelt(){let t={};return Object.getOwnPropertyNames(this.objectData).forEach(e=>{["冶炼车间"].includes(this.objectData[e].production)&&(t[e]=this.objectData[e])}),t},chemicalIndustry(){let t={};return Object.getOwnPropertyNames(this.objectData).forEach(e=>{["化工车间"].includes(this.objectData[e].production)&&(t[e]=this.objectData[e])}),t},primaryFinishedProduct(){let t={};return Object.getOwnPropertyNames(this.objectData).forEach(e=>{["初级成品车间"].includes(this.objectData[e].production)&&(t[e]=this.objectData[e])}),t},advancedFinishedProduct(){let t={};return Object.getOwnPropertyNames(this.objectData).forEach(e=>{["高级成品车间"].includes(this.objectData[e].production)&&(t[e]=this.objectData[e])}),t}},methods:{setMaterials(t,e=1){this.$emit("setMaterials",t,e)}}},m=f,b=(n("9f8e"),n("2877")),g=Object(b["a"])(m,p,h,!1,null,"71856288",null),y=g.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ShowBoardTopClass"},[e("div",{staticClass:"topBoxClass"},[e("el-card",{staticStyle:{height:"100%"},attrs:{shadow:"always"}},t._l(t.allData,(function(n,o){return e("el-tag",{key:o,staticClass:"materialsTagClass"},[t._v(" "+t._s(t.objectFirstKey(n))+":"),e("span",{staticClass:"spanClass"},[t._v(t._s(n[t.objectFirstKey(n)]))])])})),1)],1),e("div",{staticClass:"bottomBoxClass"},[e("el-card",{staticStyle:{width:"100%",height:"100%"},attrs:{shadow:"always","body-style":{height:"calc(100% - 40px)"}}},[e("tree-diagram",{attrs:{"echarts-data":t.treeData}})],1)],1)])},O=[],v=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"echartsTreeDom"}})},w=[],D=n("313e"),C={name:"TreeDiagram",props:{echartsData:Object},watch:{getOption:{handler(t,e){(t||t===e)&&this.myChart&&(this.myChart.showLoading(),this.myChart.setOption(this.getOption),this.myChart.hideLoading())},immediate:!0,deep:!0}},mounted(){const t=document.getElementById("echartsTreeDom");this.myChart=D["a"](t)},computed:{getOption(){return this.option.series[0].data=[this.echartsData],console.log(this.option.series[0].data),this.option}},data(){return{myChart:void 0,option:{tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{initialTreeDepth:4,expandAndCollapse:!0,type:"tree",data:[],top:"1%",left:"15%",bottom:"1%",right:"7%",symbolSize:50,orient:"RL",label:{verticalAlign:"middle",align:"left",position:[5,-10],formatter:t=>t.name+":"+t.value},leaves:{label:{position:"left",verticalAlign:"middle",align:"right"}},emphasis:{focus:"descendant"},animationDuration:550,animationDurationUpdate:750}]}}},methods:{}},_=C,P=Object(b["a"])(_,v,w,!1,null,"64692da6",null),M=P.exports,x={name:"ShowBoard",components:{TreeDiagram:M},props:{treeData:Object,allData:Array},computed:{},methods:{objectFirstKey(t){return Object.getOwnPropertyNames(t)[0]}}},B=x,N=(n("f88c"),Object(b["a"])(B,j,O,!1,null,"6a9fc9e6",null)),k=N.exports,S=n("ec26"),T={name:"MainBoard",components:{ShowBoard:k,Inventory:y},computed:{objectData(){return l}},data(){return{allMaterials:[],treeMaterials:{}}},methods:{buildTree(t,e,n=1){if(!this.objectData[t])return t;const o=Object(S["a"])(),r={id:o,parentId:e,name:t,amount:n,value:n,symbol:"image://"+d[t],children:[]};if(!this.objectData[t].need)return r;let a=Object.getOwnPropertyNames(this.objectData[t].need);return a.forEach(e=>{r.children.push(this.buildTree(e,o,this.objectData[t].need[e]))}),r},getMaterials(t,e=1){const n=this.calculateProduction(t,e);this.allMaterials=this.sortByProduction(n),console.log(this.allMaterials),this.treeMaterials=this.buildTree(t),console.log(this.treeMaterials)},sortByProduction(t){let e=Object.entries(t).map(([t,e])=>({[t]:e}));return e.sort((t,e)=>c.indexOf(this.objectData[Object.getOwnPropertyNames(t)[0]].production)-c.indexOf(this.objectData[Object.getOwnPropertyNames(e)[0]].production))},calculateProduction(t,e=1){const n=l[t];if(!n||e<=0||!Number.isInteger(e))return{};if(!n.need)return{[t]:e};const o={};for(const[a,i]of Object.entries(n.need)){const t=i*e;o[a]=(o[a]||0)+t;const n=this.calculateProduction(a,t);for(const[e,r]of Object.entries(n))o[e]=(o[e]||0)+r}const r={};for(const[a,i]of Object.entries(o)){const t=l[a];if(!t)return{};const e=i;r[a]=(r[a]||0)+e}return r}}},F=T,I=(n("c70e"),Object(b["a"])(F,i,s,!1,null,"7c0051f8",null)),E=I.exports,z={name:"App",components:{MainBoard:E},mounted(){u("BD导航卫星"),u("DF导弹系统"),u("H-30轰炸机"),u("信号接收器"),u("内燃机"),u("军用水壶"),u("军用电筒"),u("军用背包"),u("冰箱"),u("原子弹"),u("原油"),u("口罩"),u("坦克"),u("塑料片"),u("处理器"),u("太阳能板"),u("头盔"),u("导弹车"),u("平底锅"),u("手机"),u("抽水机"),u("拖拉机"),u("挖掘机"),u("摩托车"),u("收音机"),u("散热器"),u("望远镜"),u("木材"),u("木板"),u("木炭"),u("棉花"),u("气球"),u("水泥"),u("汽车"),u("沥青"),u("洗衣机"),u("涡扇发动机"),u("火箭助推器"),u("火箭燃料"),u("灯泡"),u("炸弹"),u("玩具车"),u("玻璃"),u("电动机"),u("电池"),u("电脑"),u("电视机"),u("电路板"),u("电钻"),u("电风扇"),u("石墨"),u("硅矿"),u("硫"),u("硫酸"),u("碎石"),u("磁铁"),u("离心机"),u("紫科研瓶"),u("红科研瓶"),u("纸"),u("纺织"),u("绝缘线"),u("绿科研瓶"),u("蓝科研瓶"),u("螺丝"),u("超级计算机"),u("轻质油"),u("遥控感应器"),u("重力推进器"),u("钛合金"),u("钛块"),u("钢板"),u("铀棒"),u("铀矿"),u("铀矿废料"),u("铁片"),u("铁矿"),u("铁钉"),u("铜矿"),u("铜线"),u("防弹衣"),u("防毒面具"),u("雷达"),u("高效电池"),u("黄科研瓶"),u("黑科研瓶")}},A=z,L=(n("6159"),Object(b["a"])(A,r,a,!1,null,null,null)),K=L.exports,R=n("5c96"),H=n.n(R);n("0fae");o["default"].use(H.a),o["default"].config.productionTip=!1,new o["default"]({render:t=>t(K)}).$mount("#app")},6159:function(t,e,n){"use strict";n("9707")},"6c6d":function(t,e,n){},9707:function(t,e,n){},"9f8e":function(t,e,n){"use strict";n("b99d")},b99d:function(t,e,n){},c70e:function(t,e,n){"use strict";n("d96f")},d96f:function(t,e,n){},f88c:function(t,e,n){"use strict";n("6c6d")}});
//# sourceMappingURL=app.ee842df9.js.map